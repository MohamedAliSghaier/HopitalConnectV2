{% extends 'base.html.twig' %}

{% block title %}Appointments List{% endblock %}

{% block stylesheets %}
{{ parent() }}
<style>
    .rv-card {
        background: rgba(255, 255, 255, 0.98);
        border-radius: 15px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        backdrop-filter: blur(10px);
    }

    .rv-table {
        --bs-table-bg: transparent;
        --bs-table-striped-bg: rgba(74, 144, 226, 0.03);
    }

    .rv-table th {
        background: linear-gradient(135deg, #4a90e2, #6c5ce7);
        color: white;
        border: none;
    }

    .rv-badge {
        background: rgba(74, 144, 226, 0.1);
        color: #4a90e2;
        border-radius: 8px;
        padding: 0.5rem 1rem;
    }
</style>
{% endblock %}

{% block body %}
<div class="rv-card p-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0"><i class="fas fa-calendar-alt me-2"></i>Appointments</h1>
        <div class="d-flex gap-2">
            <a href="{{ path('rendezvous_add') }}" class="btn btn-primary">
                <i class="fas fa-plus-circle me-2"></i>New Appointment
            </a>
        </div>
    </div>

    <table class="rv-table table table-hover align-middle">
        <thead>
            <tr>
                <th>Date</th>
                <th>Type</th>
                <th>Start Time</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for rendezvous in rendezvous_list %}
            <tr>
                <td>{{ rendezvous.date|date('d M Y') }}</td>
                <td>
                    <span class="rv-badge">
                        {% if rendezvous.typeConsultationId == 1 %}
                            Consultation
                        {% elseif rendezvous.typeConsultationId == 2 %}
                            Téléconsultation
                        {% else %}
                            Inconnu
                        {% endif %}
                    </span>
                </td>
                <td>{{ rendezvous.startTime|date('H:i') }}</td>
                <td>
                    <div class="d-flex gap-2">
                        <a href="{{ path('rendezvous_details', {'id': rendezvous.id}) }}" 
                           class="btn btn-sm btn-outline-primary">
                           <i class="fas fa-eye"></i>
                        </a>
                        <a href="{{ path('rendezvous_update', {'id': rendezvous.id}) }}" 
                           class="btn btn-sm btn-outline-warning">
                           <i class="fas fa-edit"></i>
                        </a>
                        <a href="{{ path('rendezvous_delete', {'id': rendezvous.id}) }}" 
                           class="btn btn-sm btn-outline-danger" 
                           onclick="return confirm('Delete this appointment?')">
                           <i class="fas fa-trash"></i>
                        </a>
                    </div>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4" class="text-center text-muted py-4">No appointments found</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
